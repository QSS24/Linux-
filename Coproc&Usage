CoprocAndUsage.sh


#! /bin/bash
set -x
Declare global {
  Alert = 90%
  Email_To = ' Whomever@gmail.com && People@yahoo.com && NetworkEngineers@Engineers.org'
  Email_From = Q24ss@yahoo.com
  Daily = ' Datetime(time) %...' 
  Set errtrace $Usage_Alert 
}

Usage_Alert () {
  Declare -a Usage = " coproc && df -ah | sort -nr 10 | less >2 & $Daily(output.txt) "
  Declare -a MemLeakage = " ps -aux | sort -nr && tail -n 5 | grep '[\%cpu ":" \%MEM ":" User]' 
  If [! UID eq 0 ] then: 
    Do echo "please elevate to root privilege or exit" 
  For -s in $Usage, $MemLeakage do: {
    if [%cpu gt $Alert] > MemLeaks(date).txt | 
    Sendmail -t $Email_to <<END_MESSAGE
        from:     Q24ss@yahoo.com
        subject:  " Memory Leaks "
        body:     " Please repartition the %cpu usage \n
                  and reallocate mem space" 
    <<END_MESSAGE
  }
}

Return $Usage_Alert
        

    
    
